from ..dol import *

class Resistance(Constant):
    def __init__(self, C, u, ind):
        try:
            mesh = u[0].function_space().mesh()
        except:
            mesh = u.function_space().mesh()
            
        fd = mesh.domains().facet_domains()
        assert fd is not None, "Assuming a mesh with attached facet domains!"
        dsi = ds[fd](ind)
            
        n = FacetNormal(mesh)
        
        form = 0
        for i in xrange(mesh.geometry().dim()):
            form += u[i]*n[i]
        form *= dsi

        Constant.__init__(self, C*assemble(form))

 
